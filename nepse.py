import requests
import re
from bs4 import BeautifulSoup
import itertools
from functools import wraps
from datetime import datetime
from fcache.cache import FileCache
import random
import json
import matplotlib.pyplot as plt
import time

def FetchIfNotSaved(f):
    """ Decorator to cache the Sharesansar's Data , Cached Every 1 Hour.

    """
    @wraps(f)
    def decorated_function(*args, **kwargs):
        try:
            #print(dd)
            mycache = FileCache('nepse')
            data=(mycache[kwargs['code']])
            if not needsUpdate(data):
                return data
            raise Exception('Data OUTDATED')
            
        except Exception as e:
            print(e)
            return f(*args, **kwargs)
    return decorated_function
def getCompanies(symbol):
    data=[{"id":2790,"symbol":"ACLBSL","securityName":"Aarambha Chautari Laghubitta Bittiya Sanstha Limited","name":"(ACLBSL) Aarambha Chautari Laghubitta Bittiya Sanstha Limited","activeStatus":"A"},
    {"id":294,"symbol":"ACEDPO","securityName":"ACE Development Bank Limited Promoter Share","name":"(ACEDPO) ACE Development Bank Limited Promoter Share","activeStatus":"A"},
    {"id":2846,"symbol":"AKBSLPO","securityName":"ADHIKHOLA LAGHUBITTA BITTIYA SANSTHA LIMITED PROMOTER SHARE","name":"(AKBSLPO) ADHIKHOLA LAGHUBITTA BITTIYA SANSTHA LIMITED PROMOTER SHARE","activeStatus":"A"},{"id":397,"symbol":"ADBL","securityName":"Agriculture Development Bank Limited","name":"(ADBL) Agriculture Development Bank Limited","activeStatus":"A"},{"id":2886,"symbol":"ADBLD83","securityName":"10.35% Agricultural Bank Debenture 2083","name":"(ADBLD83) 10.35% Agricultural Bank Debenture 2083","activeStatus":"A"},{"id":2893,"symbol":"AIL","securityName":"Ajod Insurance Limited","name":"(AIL) Ajod Insurance Limited","activeStatus":"A"},{"id":2788,"symbol":"AKJCL","securityName":"Ankhu Khola Jalvidhyut Company Ltd","name":"(AKJCL) Ankhu Khola Jalvidhyut Company Ltd","activeStatus":"A"},{"id":697,"symbol":"API","securityName":"Api Power Company Ltd.","name":"(API) Api Power Company Ltd.","activeStatus":"A"},{"id":622,"symbol":"ARDBLP","securityName":"Araniko Development Bank Limited Promoter Share","name":"(ARDBLP) Araniko Development Bank Limited Promoter Share","activeStatus":"A"},{"id":2757,"symbol":"AKPL","securityName":"Arun Kabeli Power Ltd.","name":"(AKPL) Arun Kabeli Power Ltd.","activeStatus":"A"},{"id":360,"symbol":"AHPC","securityName":"Arun Valley Hydropower Development Co. Ltd.","name":"(AHPC) Arun Valley Hydropower Development Co. Ltd.","activeStatus":"A"},{"id":2807,"symbol":"ALBSL","securityName":"Asha Laghubitta Bittiya Sanstha Ltd","name":"(ALBSL) Asha Laghubitta Bittiya Sanstha Ltd","activeStatus":"A"},{"id":385,"symbol":"ALICL","securityName":"Asian Life Insurance Co. Limited","name":"(ALICL) Asian Life Insurance Co. Limited","activeStatus":"A"},{"id":599,"symbol":"ALICLP","securityName":"Asian Life Insurance Co. Ltd Promoter Share","name":"(ALICLP) Asian Life Insurance Co. Ltd Promoter Share","activeStatus":"A"},{"id":486,"symbol":"BBBLNP","securityName":"Bagheshowari Development Bank  Ltd. Promoer Share","name":"(BBBLNP) Bagheshowari Development Bank  Ltd. Promoer Share","activeStatus":"A"},{"id":681,"symbol":"BGDBLP","securityName":"Bagmati Development Bank Ltd. Promoter Share","name":"(BGDBLP) Bagmati Development Bank Ltd. Promoter Share","activeStatus":"A"},{"id":289,"symbol":"BOKLPO","securityName":"Bank of Kathmandu Limited Promoter Share","name":"(BOKLPO) Bank of Kathmandu Limited Promoter Share","activeStatus":"A"},{"id":138,"symbol":"BOKL","securityName":"Bank of Kathmandu Ltd.","name":"(BOKL) Bank of Kathmandu Ltd.","activeStatus":"A"},{"id":2870,"symbol":"BOKD2079","securityName":"8% BOK Debenture 2079","name":"(BOKD2079) 8% BOK Debenture 2079","activeStatus":"A"},{"id":686,"symbol":"BARUN","securityName":"Barun Hydropower Co. Ltd.","name":"(BARUN) Barun Hydropower Co. Ltd.","activeStatus":"A"},{"id":227,"symbol":"BFC","securityName":"Best Finance Company Ltd.","name":"(BFC) Best Finance Company Ltd.","activeStatus":"A"},{"id":339,"symbol":"BFCPO","securityName":"Best Finance Co. Limited Promoter Share","name":"(BFCPO) Best Finance Co. Limited Promoter Share","activeStatus":"A"},{"id":477,"symbol":"BLDBLP","securityName":"Biratlaxmi Development Bank Ltd. Promoter Share","name":"(BLDBLP) Biratlaxmi Development Bank Ltd. Promoter Share","activeStatus":"A"},{"id":195,"symbol":"BNL","securityName":"Bottlers Nepal (Balaju) Limited","name":"(BNL) Bottlers Nepal (Balaju) Limited","activeStatus":"A"},{"id":213,"symbol":"BNT","securityName":"Bottlers Nepal (Terai) Limited","name":"(BNT) Bottlers Nepal (Terai) Limited","activeStatus":"A"},{"id":646,"symbol":"BUDBLP","securityName":"Business Universal Development Bank Ltd. Promoter Share","name":"(BUDBLP) Business Universal Development Bank Ltd. Promoter Share","activeStatus":"A"},{"id":153,"symbol":"BPCL","securityName":"Butwal Power Company Limited","name":"(BPCL) Butwal Power Company Limited","activeStatus":"A"},{"id":2862,"symbol":"CMF2","securityName":"CITIZENS MUTUAL FUND 2","name":"(CMF2) CITIZENS MUTUAL FUND 2","activeStatus":"A"},{"id":245,"symbol":"CFCL","securityName":"Central Finance Co. Ltd.","name":"(CFCL) Central Finance Co. Ltd.","activeStatus":"A"},{"id":676,"symbol":"CFCLPO","securityName":"Central Finance Co. Ltd. Promoter Share","name":"(CFCLPO) Central Finance Co. Ltd. Promoter Share","activeStatus":"A"},{"id":656,"symbol":"CCBLPO","securityName":"Century Commercial Bank Ltd. Promoter Share","name":"(CCBLPO) Century Commercial Bank Ltd. Promoter Share","activeStatus":"A"},{"id":605,"symbol":"CCBL","securityName":"Century Commercial Bank Ltd.","name":"(CCBL) Century Commercial Bank Ltd.","activeStatus":"A"},{"id":2917,"symbol":"CGH","securityName":"Chandragiri Hills Limited","name":"(CGH) Chandragiri Hills Limited","activeStatus":"A"},{"id":164,"symbol":"CBBL","securityName":"Chhimek Laghubitta Bikas Bank Limited","name":"(CBBL) Chhimek Laghubitta Bikas Bank Limited","activeStatus":"A"},{"id":698,"symbol":"CBBLPO","securityName":"Chhimek Laghubitta Bikas Bank Limited Promoter Share","name":"(CBBLPO) Chhimek Laghubitta Bikas Bank Limited Promoter Share","activeStatus":"A"},{"id":2766,"symbol":"CHL","securityName":"Chhyangdi Hydropower Ltd.","name":"(CHL) Chhyangdi Hydropower Ltd.","activeStatus":"A"},{"id":154,"symbol":"CHCL","securityName":"Chilime Hydropower Company Limited","name":"(CHCL) Chilime Hydropower Company Limited","activeStatus":"A"},{"id":2780,"symbol":"CMF1","securityName":"Citizens Mutual Fund -1","name":"(CMF1) Citizens Mutual Fund -1","activeStatus":"A"},{"id":348,"symbol":"CZBIL","securityName":"Citizen Bank International Limited","name":"(CZBIL) Citizen Bank International Limited","activeStatus":"A"},{"id":493,"symbol":"CZBILP","securityName":"Citizens Bank Internatioal Limited Promoter Share","name":"(CZBILP) Citizens Bank Internatioal Limited Promoter Share","activeStatus":"A"},{"id":2889,"symbol":"CIZBD86","securityName":"10.25% Citizens Bank Debenture 2086","name":"(CIZBD86) 10.25% Citizens Bank Debenture 2086","activeStatus":"A"},{"id":210,"symbol":"CIT","securityName":"Citizen Investment Trust","name":"(CIT) Citizen Investment Trust","activeStatus":"A"},{"id":532,"symbol":"CBL","securityName":"Civil Bank Ltd","name":"(CBL) Civil Bank Ltd","activeStatus":"A"},{"id":653,"symbol":"CBLPO","securityName":"Civil Bank Ltd Promoter Share","name":"(CBLPO) Civil Bank Ltd Promoter Share","activeStatus":"A"},{"id":387,"symbol":"PSDBLP","securityName":"Pashupati Development Bank Limited Promoter Share","name":"(PSDBLP) Pashupati Development Bank Limited Promoter Share","activeStatus":"A"},{"id":693,"symbol":"CLBSL","securityName":"Civil Laghubitta Bittiya Sanstha Ltd.","name":"(CLBSL) Civil Laghubitta Bittiya Sanstha Ltd.","activeStatus":"A"},{"id":481,"symbol":"CEDBLP","securityName":"Clean Energy Development Bank Ltd. Promoter Share","name":"(CEDBLP) Clean Energy Development Bank Ltd. Promoter Share","activeStatus":"A"},{"id":450,"symbol":"CORBL","securityName":"Corporate Development Bank Limited","name":"(CORBL) Corporate Development Bank Limited","activeStatus":"A"},{"id":2763,"symbol":"CORBLP","securityName":"Corporate Development Bank Ltd. Promoter Share","name":"(CORBLP) Corporate Development Bank Ltd. Promoter Share","activeStatus":"A"},{"id":638,"symbol":"CSDBLP","securityName":"Cosmos Development Bank Ltd. Promoter Share","name":"(CSDBLP) Cosmos Development Bank Ltd. Promoter Share","activeStatus":"A"},{"id":641,"symbol":"CNDBLP","securityName":"Country Development Bank Ltd. Promoter Share","name":"(CNDBLP) Country Development Bank Ltd. Promoter Share","activeStatus":"A"},{"id":607,"symbol":"DDBLPO","securityName":"Deprosc LaghuBitta Promoter Share","name":"(DDBLPO) Deprosc LaghuBitta Promoter Share","activeStatus":"A"},{"id":166,"symbol":"DDBL","securityName":"Deprosc Laghubitta Bittiya Sanstha Limited","name":"(DDBL) Deprosc Laghubitta Bittiya Sanstha Limited","activeStatus":"A"},{"id":2754,"symbol":"DHPL","securityName":"Dibyashwori Hydropower Ltd.","name":"(DHPL) Dibyashwori Hydropower Ltd.","activeStatus":"A"},{"id":642,"symbol":"EKBLPO","securityName":"Ekata Bikas Bank Ltd. Promoter Share","name":"(EKBLPO) Ekata Bikas Bank Ltd. Promoter Share","activeStatus":"A"},{"id":2871,"symbol":"EBLD2078","securityName":"8% EBL Debenture 2078","name":"(EBLD2078) 8% EBL Debenture 2078","activeStatus":"A"},{"id":137,"symbol":"EBL","securityName":"Everest Bank Limited","name":"(EBL) Everest Bank Limited","activeStatus":"A"},{"id":277,"symbol":"EBLCP","securityName":"Everest Bank Limited Con. Pref.","name":"(EBLCP) Everest Bank Limited Con. Pref.","activeStatus":"A"},{"id":594,"symbol":"EBLPO","securityName":"Everest Bank Ltd.Promoter","name":"(EBLPO) Everest Bank Ltd.Promoter","activeStatus":"A"},{"id":335,"symbol":"EFLPO","securityName":"Everest Finance Limited Promoter Share","name":"(EFLPO) Everest Finance Limited Promoter Share","activeStatus":"A"},{"id":702,"symbol":"EICPO","securityName":"Everest Insurance Co. Ltd. Promoter Share","name":"(EICPO) Everest Insurance Co. Ltd. Promoter Share","activeStatus":"A"},{"id":181,"symbol":"EIC","securityName":"Everest Insurance Co. Ltd.","name":"(EIC) Everest Insurance Co. Ltd.","activeStatus":"A"},{"id":274,"symbol":"EDBL","securityName":"Excel Development Bank Ltd.","name":"(EDBL) Excel Development Bank Ltd.","activeStatus":"A"},{"id":612,"symbol":"EDBLPO","securityName":"Excel Development Bank Ltd. Promoter Share","name":"(EDBLPO) Excel Development Bank Ltd. Promoter Share","activeStatus":"A"},{"id":722,"symbol":"FMDBLP","securityName":"First Micro Finance Development Bank Ltd. Promoter Share","name":"(FMDBLP) First Micro Finance Development Bank Ltd. Promoter Share","activeStatus":"A"},{"id":490,"symbol":"FMDBL","securityName":"First Micro Finance Development Bank Ltd.","name":"(FMDBL) First Micro Finance Development Bank Ltd.","activeStatus":"A"},{"id":2758,"symbol":"FOWAD","securityName":"Forward Community Microfinance Bittiya Sanstha Ltd.","name":"(FOWAD) Forward Community Microfinance Bittiya Sanstha Ltd.","activeStatus":"A"},{"id":2921,"symbol":"FOWADP","securityName":"Forward Community Microfinance Bittiya Sanstha Ltd Promoter Share","name":"(FOWADP) Forward Community Microfinance Bittiya Sanstha Ltd Promoter Share","activeStatus":"A"},{"id":2815,"symbol":"GMFBS","securityName":"Ganapati Microfinance Bittiya Sanstha Limited","name":"(GMFBS) Ganapati Microfinance Bittiya Sanstha Limited","activeStatus":"A"},{"id":623,"symbol":"GBBLPO","securityName":"Garima Bikas Bank Limited Promoter Share","name":"(GBBLPO) Garima Bikas Bank Limited Promoter Share","activeStatus":"A"},{"id":417,"symbol":"GBBL","securityName":"Garima Bikas Bank Limited","name":"(GBBL) Garima Bikas Bank Limited","activeStatus":"A"},{"id":2905,"symbol":"GIC","securityName":"General Insurance Company Nepal Ltd","name":"(GIC) General Insurance Company Nepal Ltd","activeStatus":"A"},{"id":2806,"symbol":"GHL","securityName":"Ghalemdi Hydro Limited","name":"(GHL) Ghalemdi Hydro Limited","activeStatus":"A"},{"id":341,"symbol":"GBIME","securityName":"Global IME Bank Limited","name":"(GBIME) Global IME Bank Limited","activeStatus":"A"},{"id":511,"symbol":"GBIMEP","securityName":"Global IME Bank Ltd. Promoter Share","name":"(GBIMEP) Global IME Bank Ltd. Promoter Share","activeStatus":"A"},{"id":1740,"symbol":"GIMES1","securityName":"Global IME Samunnat Scheme-1","name":"(GIMES1) Global IME Samunnat Scheme-1","activeStatus":"A"},{"id":2840,"symbol":"GBD80/81","securityName":"10.25% GLOBAL IME BANK LTD. DEBENTURE 2080/81","name":"(GBD80/81) 10.25% GLOBAL IME BANK LTD. DEBENTURE 2080/81","activeStatus":"A"},{"id":705,"symbol":"GILB","securityName":"Global IME Laghubitta Bittiya Sanstha Ltd.","name":"(GILB) Global IME Laghubitta Bittiya Sanstha Ltd.","activeStatus":"A"},{"id":355,"symbol":"GFCLPO","securityName":"Goodwill Finance Co. Ltd. Promoter Share","name":"(GFCLPO) Goodwill Finance Co. Ltd. Promoter Share","activeStatus":"A"},{"id":232,"symbol":"GFCL","securityName":"Goodwill Finance Co. Ltd.","name":"(GFCL) Goodwill Finance Co. Ltd.","activeStatus":"A"},{"id":2883,"symbol":"GWFD83","securityName":"12 % Goodwill Finance Limited Debenture 2083","name":"(GWFD83) 12 % Goodwill Finance Limited Debenture 2083","activeStatus":"A"},{"id":583,"symbol":"GBLBS","securityName":"Grameen Bikas Laghubitta Bittiya Sanstha Ltd.","name":"(GBLBS) Grameen Bikas Laghubitta Bittiya Sanstha Ltd.","activeStatus":"A"},{"id":712,"symbol":"GBLBSP","securityName":"Grameen Bikas Laghubitta Bittiya Sanstha Ltd. Promoter Share","name":"(GBLBSP) Grameen Bikas Laghubitta Bittiya Sanstha Ltd. Promoter Share","activeStatus":"A"},{"id":346,"symbol":"PDBLPO","securityName":"Paschimanchal Bikash Bank Ltd. Promoter Share","name":"(PDBLPO) Paschimanchal Bikash Bank Ltd. Promoter Share","activeStatus":"A"},{"id":310,"symbol":"GRANDP","securityName":"Grand Bank Limited Promoter Share","name":"(GRANDP) Grand Bank Limited Promoter Share","activeStatus":"A"},{"id":2744,"symbol":"GRDBL","securityName":"Green Development Bank Ltd.","name":"(GRDBL) Green Development Bank Ltd.","activeStatus":"A"},{"id":2745,"symbol":"GRDBLP","securityName":"Green Development Bank Ltd. Promoter Share","name":"(GRDBLP) Green Development Bank Ltd. Promoter Share","activeStatus":"A"},{"id":2924,"symbol":"GLH","securityName":"GreenLife Hydropower Limited","name":"(GLH) GreenLife Hydropower Limited","activeStatus":"A"},{"id":613,"symbol":"GMFILP","securityName":"Guheyshwori Merchant & Finance Ltd. Promoter Share","name":"(GMFILP) Guheyshwori Merchant & Finance Ltd. Promoter Share","activeStatus":"A"},{"id":263,"symbol":"GMFIL","securityName":"Guheshowori Merchant Bank & Finance Co. Ltd.","name":"(GMFIL) Guheshowori Merchant Bank & Finance Co. Ltd.","activeStatus":"A"},{"id":2826,"symbol":"GLBSL","securityName":"Gurans Laghubitta Bittiya Sanstha Limited","name":"(GLBSL) Gurans Laghubitta Bittiya Sanstha Limited","activeStatus":"A"},{"id":621,"symbol":"GLICLP","securityName":"Guras Life Insurance Company Ltd. Promoter Share","name":"(GLICLP) Guras Life Insurance Company Ltd. Promoter Share","activeStatus":"A"},{"id":447,"symbol":"GLICL","securityName":"Gurans Life Insurance Company Ltd.","name":"(GLICL) Gurans Life Insurance Company Ltd.","activeStatus":"A"},{"id":315,"symbol":"GUFLPO","securityName":"Gurkhas Finance  Ltd. Promoter Share","name":"(GUFLPO) Gurkhas Finance  Ltd. Promoter Share","activeStatus":"A"},{"id":204,"symbol":"GUFL","securityName":"Gurkhas Finance Ltd.","name":"(GUFL) Gurkhas Finance Ltd.","activeStatus":"A"},{"id":611,"symbol":"HAMAPO","securityName":"Hama Merchant & Finance Ltd. Promoter Share","name":"(HAMAPO) Hama Merchant & Finance Ltd. Promoter Share","activeStatus":"A"},{"id":2880,"symbol":"HDHPC","securityName":"Himal Dolakha Hydropower Company Limited","name":"(HDHPC) Himal Dolakha Hydropower Company Limited","activeStatus":"A"},{"id":2824,"symbol":"HURJA","securityName":"Himalaya Urja Bikas Company Limited","name":"(HURJA) Himalaya Urja Bikas Company Limited","activeStatus":"A"},{"id":134,"symbol":"HBL","securityName":"Himalayan Bank Limited","name":"(HBL) Himalayan Bank Limited","activeStatus":"A"},{"id":564,"symbol":"HBLPO","securityName":"Himalayan Bank Ltd. Promoter","name":"(HBLPO) Himalayan Bank Ltd. Promoter","activeStatus":"A"},{"id":2873,"symbol":"HBLD83","securityName":"10% Himalayan Bank Debenture 2083","name":"(HBLD83) 10% Himalayan Bank Debenture 2083","activeStatus":"A"},{"id":235,"symbol":"HDL","securityName":"Himalayan Distillery Limited","name":"(HDL) Himalayan Distillery Limited","activeStatus":"A"},{"id":700,"symbol":"HGIPO","securityName":"Himalayan General Insurance Co. Ltd Promoter Share","name":"(HGIPO) Himalayan General Insurance Co. Ltd Promoter Share","activeStatus":"A"},{"id":179,"symbol":"HGI","securityName":"Himalayan General Insurance Co. Ltd","name":"(HGI) Himalayan General Insurance Co. Ltd","activeStatus":"A"},{"id":2767,"symbol":"HPPL","securityName":"Himalayan Power Partner Ltd.","name":"(HPPL) Himalayan Power Partner Ltd.","activeStatus":"A"},{"id":2742,"symbol":"HIDCL","securityName":"Hydorelectricity Investment and Development Company Ltd","name":"(HIDCL) Hydorelectricity Investment and Development Company Ltd","activeStatus":"A"},{"id":400,"symbol":"ICFCPO","securityName":"ICFC Finance Limited Promotor Share","name":"(ICFCPO) ICFC Finance Limited Promotor Share","activeStatus":"A"},{"id":273,"symbol":"ICFC","securityName":"ICFC Finance Limited","name":"(ICFC) ICFC Finance Limited","activeStatus":"A"},{"id":2882,"symbol":"ICFCD83","securityName":"12% ICFC Finance Limited Debenture 2083","name":"(ICFCD83) 12% ICFC Finance Limited Debenture 2083","activeStatus":"A"},{"id":186,"symbol":"IGI","securityName":"IME General Insurance Ltd.","name":"(IGI) IME General Insurance Ltd.","activeStatus":"A"},{"id":635,"symbol":"IGIPO","securityName":"IME General Insurance  Ltd. Promoter Share","name":"(IGIPO) IME General Insurance  Ltd. Promoter Share","activeStatus":"A"},{"id":2832,"symbol":"ILBS","securityName":"Infinity Laghubitta Bittiya Sanstha Limited","name":"(ILBS) Infinity Laghubitta Bittiya Sanstha Limited","activeStatus":"A"},{"id":392,"symbol":"IDBLPO","securityName":"Infrastructure Development Bank Limited Promoter Share","name":"(IDBLPO) Infrastructure Development Bank Limited Promoter Share","activeStatus":"A"},{"id":250,"symbol":"JFL","securityName":"Janaki Finance Ltd.","name":"(JFL) Janaki Finance Ltd.","activeStatus":"A"},{"id":292,"symbol":"JFLPO","securityName":"Janaki Finance Limited Promoter Share","name":"(JFLPO) Janaki Finance Limited Promoter Share","activeStatus":"A"},{"id":695,"symbol":"JSLBB","securityName":"Janautthan Samudayic Laghubitta Bikas Bank Ltd.","name":"(JSLBB) Janautthan Samudayic Laghubitta Bikas Bank Ltd.","activeStatus":"A"},{"id":2789,"symbol":"JOSHI","securityName":"Joshi Hydropower Development Company Ltd","name":"(JOSHI) Joshi Hydropower Development Company Ltd","activeStatus":"A"},{"id":418,"symbol":"JBBL","securityName":"Jyoti Bikas Bank Limited","name":"(JBBL) Jyoti Bikas Bank Limited","activeStatus":"A"},{"id":579,"symbol":"JBBLPO","securityName":"Jyoti Bikash  Bank Ltd. Promoter Share","name":"(JBBLPO) Jyoti Bikash  Bank Ltd. Promoter Share","activeStatus":"A"},{"id":2929,"symbol":"JLI","securityName":"Jyoti Life Insurance Ltd","name":"(JLI) Jyoti Life Insurance Ltd","activeStatus":"A"},{"id":593,"symbol":"KMCDB","securityName":"Kalika Microcredit Development Bank Ltd.","name":"(KMCDB) Kalika Microcredit Development Bank Ltd.","activeStatus":"A"},{"id":678,"symbol":"KMCDBP","securityName":"Kalika Microcredit Development Bank Ltd. Promoter Share","name":"(KMCDBP) Kalika Microcredit Development Bank Ltd. Promoter Share","activeStatus":"A"},{"id":2787,"symbol":"KPCL","securityName":"Kalika power Company Ltd","name":"(KPCL) Kalika power Company Ltd","activeStatus":"A"},{"id":459,"symbol":"KSBBL","securityName":"Kamana Sewa Bikas Bank Limited","name":"(KSBBL) Kamana Sewa Bikas Bank Limited","activeStatus":"A"},{"id":677,"symbol":"KSBBLP","securityName":"Kamana Sewa Bikas Bank Limited Promoter Share","name":"(KSBBLP) Kamana Sewa Bikas Bank Limited Promoter Share","activeStatus":"A"},{"id":1739,"symbol":"KRBLPO","securityName":"Karnali Development Bank Limited Promoter Share","name":"(KRBLPO) Karnali Development Bank Limited Promoter Share","activeStatus":"A"},{"id":428,"symbol":"KRBL","securityName":"Karnali Development Bank Limited","name":"(KRBL) Karnali Development Bank Limited","activeStatus":"A"},{"id":558,"symbol":"KAFILP","securityName":"Kaski Finanace Ltd. Promoter","name":"(KAFILP) Kaski Finanace Ltd. Promoter","activeStatus":"A"},{"id":550,"symbol":"KDBLPO","securityName":"Kasthamandap Dev. Bank Ltd Promoter Share","name":"(KDBLPO) Kasthamandap Dev. Bank Ltd Promoter Share","activeStatus":"A"},{"id":2751,"symbol":"KKHC","securityName":"Khanikhola Hydropower Co. Ltd.","name":"(KKHC) Khanikhola Hydropower Co. Ltd.","activeStatus":"A"},{"id":694,"symbol":"KLBSL","securityName":"Kisan Lagubitta Bittiya Sanstha Limited","name":"(KLBSL) Kisan Lagubitta Bittiya Sanstha Limited","activeStatus":"A"},{"id":283,"symbol":"KBLPO","securityName":"Kumari Bank Limited Promotor Share","name":"(KBLPO) Kumari Bank Limited Promotor Share","activeStatus":"A"},{"id":142,"symbol":"KBL","securityName":"Kumari Bank Limited","name":"(KBL) Kumari Bank Limited","activeStatus":"A"},{"id":2885,"symbol":"KBLD86","securityName":"10.25% KBL Debenture 2086","name":"(KBLD86) 10.25% KBL Debenture 2086","activeStatus":"A"},{"id":2765,"symbol":"LEMF","securityName":"Laxmi Equity Fund","name":"(LEMF) Laxmi Equity Fund","activeStatus":"A"},{"id":2879,"symbol":"LBLD86","securityName":"10% Laxmi Bank Debenture 2086","name":"(LBLD86) 10% Laxmi Bank Debenture 2086","activeStatus":"A"},{"id":141,"symbol":"LBL","securityName":"Laxmi Bank Limited","name":"(LBL) Laxmi Bank Limited","activeStatus":"A"},{"id":286,"symbol":"LBLPO","securityName":"Laxmi Bank Limited Promoter Share","name":"(LBLPO) Laxmi Bank Limited Promoter Share","activeStatus":"A"},{"id":2902,"symbol":"LUK","securityName":"Laxmi Unnati Kosh","name":"(LUK) Laxmi Unnati Kosh","activeStatus":"A"},{"id":644,"symbol":"LLBSPO","securityName":"Laxmi Laghubitta Bittiya Sanstha Ltd. Promoter Share","name":"(LLBSPO) Laxmi Laghubitta Bittiya Sanstha Ltd. Promoter Share","activeStatus":"A"},{"id":618,"symbol":"LLBS","securityName":"Laxmi Laghubitta Bittiya Sanstha Ltd.","name":"(LLBS) Laxmi Laghubitta Bittiya Sanstha Ltd.","activeStatus":"A"},{"id":2903,"symbol":"LEC","securityName":"Liberty Energy Company Limited","name":"(LEC) Liberty Energy Company Limited","activeStatus":"A"},{"id":188,"symbol":"LICN","securityName":"Life Insurance Co. Nepal","name":"(LICN) Life Insurance Co. Nepal","activeStatus":"A"},{"id":284,"symbol":"LUBLPO","securityName":"Lumbini Bank Limited Promotor Share","name":"(LUBLPO) Lumbini Bank Limited Promotor Share","activeStatus":"A"},{"id":626,"symbol":"LBBLPO","securityName":"Lumbini Bikas Bank Ltd. Promoter Share","name":"(LBBLPO) Lumbini Bikas Bank Ltd. Promoter Share","activeStatus":"A"},{"id":358,"symbol":"LBBL","securityName":"Lumbini Bikas Bank Ltd.","name":"(LBBL) Lumbini Bikas Bank Ltd.","activeStatus":"A"},{"id":523,"symbol":"LFLCPO","securityName":"Lumbini Finance Ltd Promoter Share","name":"(LFLCPO) Lumbini Finance Ltd Promoter Share","activeStatus":"A"},{"id":703,"symbol":"LGILPO","securityName":"Lumbini General Insurance Co. Ltd. Promoter Share","name":"(LGILPO) Lumbini General Insurance Co. Ltd. Promoter Share","activeStatus":"A"},{"id":190,"symbol":"LGIL","securityName":"Lumbini General Insurance Co. Ltd.","name":"(LGIL) Lumbini General Insurance Co. Ltd.","activeStatus":"A"},{"id":281,"symbol":"MBLPO","securityName":"MachhaPuchhre  Bank Limited Promotor Share","name":"(MBLPO) MachhaPuchhre  Bank Limited Promotor Share","activeStatus":"A"},{"id":140,"symbol":"MBL","securityName":"Machhapuchhre Bank Limited","name":"(MBL) Machhapuchhre Bank Limited","activeStatus":"A"},{"id":2866,"symbol":"MBLD2085","securityName":"10.25% Machhapuchhre Bank Debenture 2085","name":"(MBLD2085) 10.25% Machhapuchhre Bank Debenture 2085","activeStatus":"A"},{"id":495,"symbol":"MFLPO","securityName":"Maha Laxmi Finance Co. Ltd. Promoter Share","name":"(MFLPO) Maha Laxmi Finance Co. Ltd. Promoter Share","activeStatus":"A"},{"id":569,"symbol":"MBBLPO","securityName":"Mahakali Bikas Bank Ltd. Promoter","name":"(MBBLPO) Mahakali Bikas Bank Ltd. Promoter","activeStatus":"A"},{"id":401,"symbol":"MLBL","securityName":"Mahalaxmi Bikas Bank Ltd.","name":"(MLBL) Mahalaxmi Bikas Bank Ltd.","activeStatus":"A"},{"id":291,"symbol":"MDBLPO","securityName":"Malika Development Bank Limited Promoter Share","name":"(MDBLPO) Malika Development Bank Limited Promoter Share","activeStatus":"A"},{"id":620,"symbol":"MLBLPO","securityName":"Mahalxmi Bikas Bank Ltd. Promotor Share","name":"(MLBLPO) Mahalxmi Bikas Bank Ltd. Promotor Share","activeStatus":"A"},{"id":2925,"symbol":"MLBSL","securityName":"Mahila Lagubitta Bittiya Sanstha Limited ","name":"(MLBSL) Mahila Lagubitta Bittiya Sanstha Limited ","activeStatus":"A"},{"id":2768,"symbol":"MSLB","securityName":"Mahuli Samudayik Laghubitta Bittiya Sanstha Ltd.","name":"(MSLB) Mahuli Samudayik Laghubitta Bittiya Sanstha Ltd.","activeStatus":"A"},{"id":2928,"symbol":"MSLBP","securityName":"Mahuli Samudayik Laghubitta Bittiya Sanstha Ltd Promoter","name":"(MSLBP) Mahuli Samudayik Laghubitta Bittiya Sanstha Ltd Promoter","activeStatus":"A"},{"id":730,"symbol":"MFILPO","securityName":"Manjushree Finance Ltd. Promoter Share","name":"(MFILPO) Manjushree Finance Ltd. Promoter Share","activeStatus":"A"},{"id":516,"symbol":"MFIL","securityName":"Manjushree Finance Ltd.","name":"(MFIL) Manjushree Finance Ltd.","activeStatus":"A"},{"id":562,"symbol":"MEGA","securityName":"Mega  Bank Nepal Ltd.","name":"(MEGA) Mega  Bank Nepal Ltd.","activeStatus":"A"},{"id":657,"symbol":"MEGAPO","securityName":"Mega  Bank Nepal Ltd. Promoter Share","name":"(MEGAPO) Mega  Bank Nepal Ltd. Promoter Share","activeStatus":"A"},{"id":1741,"symbol":"MERO","securityName":"Mero Microfinance Bittiya Sanstha Ltd.","name":"(MERO) Mero Microfinance Bittiya Sanstha Ltd.","activeStatus":"A"},{"id":711,"symbol":"MMFDBP","securityName":"Mirmire Microfinance Development Bank Ltd. Promoter Share","name":"(MMFDBP) Mirmire Microfinance Development Bank Ltd. Promoter Share","activeStatus":"A"},{"id":682,"symbol":"MMFDB","securityName":"Mirmire Microfinance Development Bank Ltd.","name":"(MMFDB) Mirmire Microfinance Development Bank Ltd.","activeStatus":"A"},{"id":609,"symbol":"MDBPO","securityName":"Miteri Development Bank Ltd. Promoter Share","name":"(MDBPO) Miteri Development Bank Ltd. Promoter Share","activeStatus":"A"},{"id":371,"symbol":"MDB","securityName":"Miteri Development Bank Limited","name":"(MDB) Miteri Development Bank Limited","activeStatus":"A"},{"id":601,"symbol":"MLBBL","securityName":"Mithila LaghuBitta Bittiya Sanstha Limited","name":"(MLBBL) Mithila LaghuBitta Bittiya Sanstha Limited","activeStatus":"A"},{"id":707,"symbol":"MLBBLP","securityName":"Mithila LaghuBitta Bikas Bank Ltd. Promoter Share","name":"(MLBBLP) Mithila LaghuBitta Bikas Bank Ltd. Promoter Share","activeStatus":"A"},{"id":2913,"symbol":"MEN","securityName":"Mountain Energy Nepal Limited","name":"(MEN) Mountain Energy Nepal Limited","activeStatus":"A"},{"id":2811,"symbol":"MHNL","securityName":"Mountain Hydro Nepal Limited","name":"(MHNL) Mountain Hydro Nepal Limited","activeStatus":"A"},{"id":474,"symbol":"MNBBL","securityName":"Muktinath Bikas Bank Ltd.","name":"(MNBBL) Muktinath Bikas Bank Ltd.","activeStatus":"A"},{"id":640,"symbol":"MNBBLP","securityName":"Muktinath Bikas Bank Ltd. Promoter Share","name":"(MNBBLP) Muktinath Bikas Bank Ltd. Promoter Share","activeStatus":"A"},{"id":1737,"symbol":"MPFLPO","securityName":"Multipurpose Finance Company  Limited Promoter Share","name":"(MPFLPO) Multipurpose Finance Company  Limited Promoter Share","activeStatus":"A"},{"id":471,"symbol":"MPFL","securityName":"Multipurpose Finance Company  Limited","name":"(MPFL) Multipurpose Finance Company  Limited","activeStatus":"A"},{"id":131,"symbol":"NABIL","securityName":"Nabil Bank Limited","name":"(NABIL) Nabil Bank Limited","activeStatus":"A"},{"id":282,"symbol":"NABILP","securityName":"NABIL Bank Limited Promotor Share","name":"(NABILP) NABIL Bank Limited Promotor Share","activeStatus":"A"},{"id":2753,"symbol":"NEF","securityName":"Nabil Equity Fund","name":"(NEF) Nabil Equity Fund","activeStatus":"A"},{"id":2835,"symbol":"NBF2","securityName":"NABIL BALANCED FUND-2","name":"(NBF2) NABIL BALANCED FUND-2","activeStatus":"A"},{"id":2892,"symbol":"NBLD82","securityName":"10% Nabil Debenture 2082","name":"(NBLD82) 10% Nabil Debenture 2082","activeStatus":"A"},{"id":172,"symbol":"NABBC","securityName":"Narayani Development Bank Limited","name":"(NABBC) Narayani Development Bank Limited","activeStatus":"A"},{"id":395,"symbol":"NNFCPO","securityName":"Narayani National Finance Company Limited Promoter Share","name":"(NNFCPO) Narayani National Finance Company Limited Promoter Share","activeStatus":"A"},{"id":152,"symbol":"NHPC","securityName":"National Hydro Power Company Limited","name":"(NHPC) National Hydro Power Company Limited","activeStatus":"A"},{"id":178,"symbol":"NLICL","securityName":"National Life Insurance Co. Ltd.","name":"(NLICL) National Life Insurance Co. Ltd.","activeStatus":"A"},{"id":582,"symbol":"NLICLP","securityName":"National Life Insurance Co. Ltd. Promoter Share","name":"(NLICLP) National Life Insurance Co. Ltd. Promoter Share","activeStatus":"A"},{"id":2746,"symbol":"NMFBS","securityName":"National Microfinance Bittiya Sanstha Ltd.","name":"(NMFBS) National Microfinance Bittiya Sanstha Ltd.","activeStatus":"A"},{"id":2747,"symbol":"NMFBSP","securityName":"National Microfinance Bittiya Sanstha Ltd. Promoter","name":"(NMFBSP) National Microfinance Bittiya Sanstha Ltd. Promoter","activeStatus":"A"},{"id":615,"symbol":"NILPO","securityName":"Neco Insurace Co. Ltd. Promoter","name":"(NILPO) Neco Insurace Co. Ltd. Promoter","activeStatus":"A"},{"id":183,"symbol":"NIL","securityName":"Neco Insurance Co. Ltd.","name":"(NIL) Neco Insurance Co. Ltd.","activeStatus":"A"},{"id":363,"symbol":"NABBPO","securityName":"Nepal Aawas Finance Limited Promoter Share","name":"(NABBPO) Nepal Aawas Finance Limited Promoter Share","activeStatus":"A"},{"id":380,"symbol":"NBBPO","securityName":"Nepal Bangladesh Bank Limited Promoter Share","name":"(NBBPO) Nepal Bangladesh Bank Limited Promoter Share","activeStatus":"A"},{"id":136,"symbol":"NBB","securityName":"Nepal Bangladesh Bank Limited","name":"(NBB) Nepal Bangladesh Bank Limited","activeStatus":"A"},{"id":2854,"symbol":"NBBD2085","securityName":"10.25% NBBL Debenture 2085","name":"(NBBD2085) 10.25% NBBL Debenture 2085","activeStatus":"A"},{"id":517,"symbol":"NBL","securityName":"Nepal Bank Limited","name":"(NBL) Nepal Bank Limited","activeStatus":"A"},{"id":312,"symbol":"RMBFPO","securityName":"Royal Merchant Bank & Finance Co. Ltd. Promoter Share","name":"(RMBFPO) Royal Merchant Bank & Finance Co. Ltd. Promoter Share","activeStatus":"A"},{"id":327,"symbol":"NCCBPO","securityName":"Nepal Credit & Commercial Bank Ltd. Promoter Share","name":"(NCCBPO) Nepal Credit & Commercial Bank Ltd. Promoter Share","activeStatus":"A"},{"id":144,"symbol":"NCCB","securityName":"Nepal Credit And Commercial Bank Limited","name":"(NCCB) Nepal Credit And Commercial Bank Limited","activeStatus":"A"},{"id":307,"symbol":"NTC","securityName":"Nepal Doorsanchar Comapany Limited","name":"(NTC) Nepal Doorsanchar Comapany Limited","activeStatus":"A"},{"id":458,"symbol":"NEFLPO","securityName":"Nepal Express Finance Limited Promoter Share","name":"(NEFLPO) Nepal Express Finance Limited Promoter Share","activeStatus":"A"},{"id":651,"symbol":"NFSPO","securityName":"Nepal Finance Ltd. Promoter Share","name":"(NFSPO) Nepal Finance Ltd. Promoter Share","activeStatus":"A"},{"id":194,"symbol":"NFS","securityName":"Nepal Finance Ltd.","name":"(NFS) Nepal Finance Ltd.","activeStatus":"A"},{"id":2769,"symbol":"NHDL","securityName":"Nepal Hydro Developers Ltd.","name":"(NHDL) Nepal Hydro Developers Ltd.","activeStatus":"A"},{"id":2919,"symbol":"NIFRA","securityName":"Nepal Infrastructure Bank Limited","name":"(NIFRA) Nepal Infrastructure Bank Limited","activeStatus":"A"},{"id":176,"symbol":"NICL","securityName":"Nepal Insurance Co. Ltd.","name":"(NICL) Nepal Insurance Co. Ltd.","activeStatus":"A"},{"id":689,"symbol":"NICLPO","securityName":"Nepal Insurance Co. Ltd Promoter Share","name":"(NICLPO) Nepal Insurance Co. Ltd Promoter Share","activeStatus":"A"},{"id":2851,"symbol":"NIBD2082","securityName":"10.5 % NEPAL INVESTMENT DEBENTURE 2082","name":"(NIBD2082) 10.5 % NEPAL INVESTMENT DEBENTURE 2082","activeStatus":"A"},{"id":2755,"symbol":"NIBLPF","securityName":"NIBL Pragati Fund","name":"(NIBLPF) NIBL Pragati Fund","activeStatus":"A"},{"id":636,"symbol":"NIBSF1","securityName":"NIBL Samriddhi Fund 1","name":"(NIBSF1) NIBL Samriddhi Fund 1","activeStatus":"A"},{"id":469,"symbol":"NIBPO","securityName":"Nepal Investment Bank Ltd. Promoter Share","name":"(NIBPO) Nepal Investment Bank Ltd. Promoter Share","activeStatus":"A"},{"id":132,"symbol":"NIB","securityName":"Nepal Investment Bank Limited","name":"(NIB) Nepal Investment Bank Limited","activeStatus":"A"},{"id":589,"symbol":"NLICP","securityName":"Nepal Life Insurance Co. Ltd. Promoter","name":"(NLICP) Nepal Life Insurance Co. Ltd. Promoter","activeStatus":"A"},{"id":187,"symbol":"NLIC","securityName":"Nepal Life Insurance Co. Ltd.","name":"(NLIC) Nepal Life Insurance Co. Ltd.","activeStatus":"A"},{"id":198,"symbol":"NLO","securityName":"Nepal Lube Oil Limited","name":"(NLO) Nepal Lube Oil Limited","activeStatus":"A"},{"id":2881,"symbol":"NRIC","securityName":"Nepal Reinsurance Company Limited","name":"(NRIC) Nepal Reinsurance Company Limited","activeStatus":"A"},{"id":2890,"symbol":"SBIBD86","securityName":"10% Nepal SBI Bank Debenture 2086","name":"(SBIBD86) 10% Nepal SBI Bank Debenture 2086","activeStatus":"A"},{"id":135,"symbol":"SBI","securityName":"Nepal SBI Bank Limited","name":"(SBI) Nepal SBI Bank Limited","activeStatus":"A"},{"id":347,"symbol":"SBIPO","securityName":"Nepal SBI Bank Ltd. Promoter Share","name":"(SBIPO) Nepal SBI Bank Ltd. Promoter Share","activeStatus":"A"},{"id":313,"symbol":"NSMPO","securityName":"Nepal Share Markets Limited Promoter Share","name":"(NSMPO) Nepal Share Markets Limited Promoter Share","activeStatus":"A"},{"id":396,"symbol":"NLBBL","securityName":"Nerude Laghubita Bikas Bank Limited","name":"(NLBBL) Nerude Laghubita Bikas Bank Limited","activeStatus":"A"},{"id":661,"symbol":"NLBBLP","securityName":"Nerude Laghubita Bikas Bank Limited Promoter Share","name":"(NLBBLP) Nerude Laghubita Bikas Bank Limited Promoter Share","activeStatus":"A"},{"id":2743,"symbol":"NGPL","securityName":"Ngadi Group Power Ltd.","name":"(NGPL) Ngadi Group Power Ltd.","activeStatus":"A"},{"id":2868,"symbol":"NICD83/84","securityName":"10.25% NIC Asia Debenture 2083/84","name":"(NICD83/84) 10.25% NIC Asia Debenture 2083/84","activeStatus":"A"},{"id":2869,"symbol":"NICAD8283","securityName":"11% NIC Asia Debenture 082/83","name":"(NICAD8283) 11% NIC Asia Debenture 082/83","activeStatus":"A"},{"id":2895,"symbol":"NICAD8182","securityName":"NIC Asia Debenture 2081/82","name":"(NICAD8182) NIC Asia Debenture 2081/82","activeStatus":"A"},{"id":2825,"symbol":"NICAD 85/86","securityName":"NIC Asia Debenture 2085/86","name":"(NICAD 85/86) NIC Asia Debenture 2085/86","activeStatus":"A"},{"id":139,"symbol":"NICA","securityName":"NIC Asia Bank Ltd.","name":"(NICA) NIC Asia Bank Ltd.","activeStatus":"A"},{"id":309,"symbol":"NICAP","securityName":"NIC Asia Bank Limted Promoter Share","name":"(NICAP) NIC Asia Bank Limted Promoter Share","activeStatus":"A"},{"id":2779,"symbol":"NICGF","securityName":"NIC Asia Growth Fund","name":"(NICGF) NIC Asia Growth Fund","activeStatus":"A"},{"id":2863,"symbol":"NICBF","securityName":"NIC Asia Balanced Fund","name":"(NICBF) NIC Asia Balanced Fund","activeStatus":"A"},{"id":2887,"symbol":"NICLBSL","securityName":"NIC ASIA Laghubitta Bittiya Sanstha Limited","name":"(NICLBSL) NIC ASIA Laghubitta Bittiya Sanstha Limited","activeStatus":"A"},{"id":501,"symbol":"NCMPO","securityName":"NIDC Capital Markets Ltd. Promoter Share","name":"(NCMPO) NIDC Capital Markets Ltd. Promoter Share","activeStatus":"A"},{"id":163,"symbol":"NUBL","securityName":"Nirdhan Utthan Laghubitta Bittiya Sanstha Limited","name":"(NUBL) Nirdhan Utthan Laghubitta Bittiya Sanstha Limited","activeStatus":"A"},{"id":559,"symbol":"NLG","securityName":"NLG Insurance Company Ltd.","name":"(NLG) NLG Insurance Company Ltd.","activeStatus":"A"},{"id":704,"symbol":"NMBMF","securityName":"NMB  Microfinance Bittiya Sanstha Ltd.","name":"(NMBMF) NMB  Microfinance Bittiya Sanstha Ltd.","activeStatus":"A"},{"id":723,"symbol":"NMBMFP","securityName":"NMB  Microfinance Bittiya Sanstha Ltd. Promoter Share","name":"(NMBMFP) NMB  Microfinance Bittiya Sanstha Ltd. Promoter Share","activeStatus":"A"},{"id":391,"symbol":"NMBPO","securityName":"NMB Bank Limited Promoter Share","name":"(NMBPO) NMB Bank Limited Promoter Share","activeStatus":"A"},{"id":238,"symbol":"NMB","securityName":"NMB Bank Limited","name":"(NMB) NMB Bank Limited","activeStatus":"A"},{"id":2752,"symbol":"NMBHF1","securityName":"NMB Hybrid Fund L-1","name":"(NMBHF1) NMB Hybrid Fund L-1","activeStatus":"A"},{"id":2850,"symbol":"NMBD2085","securityName":"10 % NMB DEBENTURE 2085","name":"(NMBD2085) 10 % NMB DEBENTURE 2085","activeStatus":"A"},{"id":2867,"symbol":"NMB50","securityName":"NMB 50","name":"(NMB50) NMB 50","activeStatus":"A"},{"id":2898,"symbol":"NRN","securityName":"NRN Infrastructure and Development Limited","name":"(NRN) NRN Infrastructure and Development Limited","activeStatus":"A"},{"id":475,"symbol":"OFLPO","securityName":"Om Finance Limited Promoter Share","name":"(OFLPO) Om Finance Limited Promoter Share","activeStatus":"A"},{"id":149,"symbol":"OHL","securityName":"Oriental Hotels Limited","name":"(OHL) Oriental Hotels Limited","activeStatus":"A"},{"id":675,"symbol":"PADBLP","securityName":"Pacific Development Bank Ltd. Promoter Share","name":"(PADBLP) Pacific Development Bank Ltd. Promoter Share","activeStatus":"A"},{"id":2786,"symbol":"PMHPL","securityName":"Panchakanya Mai Hydropower Ltd","name":"(PMHPL) Panchakanya Mai Hydropower Ltd","activeStatus":"A"},{"id":2813,"symbol":"PPCL","securityName":"Panchthar Power Compant Limited","name":"(PPCL) Panchthar Power Compant Limited","activeStatus":"A"},{"id":306,"symbol":"PFLBSP","securityName":"Patan Finance Limited Promoter Share","name":"(PFLBSP) Patan Finance Limited Promoter Share","activeStatus":"A"},{"id":236,"symbol":"PFL","securityName":"Pokhara Finance Ltd.","name":"(PFL) Pokhara Finance Ltd.","activeStatus":"A"},{"id":390,"symbol":"PFLPO","securityName":"Pokhara Finance Company Limited Promoter Share","name":"(PFLPO) Pokhara Finance Company Limited Promoter Share","activeStatus":"A"},{"id":488,"symbol":"PRFLPO","securityName":"Prabhu Finance Ltd. Promoter Share","name":"(PRFLPO) Prabhu Finance Ltd. Promoter Share","activeStatus":"A"},{"id":255,"symbol":"PRVU","securityName":"Prabhu  Bank Limited","name":"(PRVU) Prabhu  Bank Limited","activeStatus":"A"},{"id":632,"symbol":"PRVUPO","securityName":"Prabhu  Bank Limited Promoter Share","name":"(PRVUPO) Prabhu  Bank Limited Promoter Share","activeStatus":"A"},{"id":2875,"symbol":"PBLD86","securityName":"10.25% Prabhu Bank  Debenture 2086","name":"(PBLD86) 10.25% Prabhu Bank  Debenture 2086","activeStatus":"A"},{"id":2904,"symbol":"PBLD84","securityName":"10% Prabhu Bank Debenture 2084 ","name":"(PBLD84) 10% Prabhu Bank Debenture 2084 ","activeStatus":"A"},{"id":184,"symbol":"PRIN","securityName":"Prabhu Insurance Ltd.","name":"(PRIN) Prabhu Insurance Ltd.","activeStatus":"A"},{"id":590,"symbol":"PRINPO","securityName":"Prabhu Insurance Company Ltd. Promoter","name":"(PRINPO) Prabhu Insurance Company Ltd. Promoter","activeStatus":"A"},{"id":2915,"symbol":"PLI","securityName":"Prabhu Life Insurance Limited","name":"(PLI) Prabhu Life Insurance Limited","activeStatus":"A"},{"id":182,"symbol":"PIC","securityName":"Premier Insurance Co. Ltd.","name":"(PIC) Premier Insurance Co. Ltd.","activeStatus":"A"},{"id":713,"symbol":"PICPO","securityName":"Premier Insurance Co. Ltd. Promoter Share","name":"(PICPO) Premier Insurance Co. Ltd. Promoter Share","activeStatus":"A"},{"id":357,"symbol":"PCBL","securityName":"Prime Commercial Bank Ltd.","name":"(PCBL) Prime Commercial Bank Ltd.","activeStatus":"A"},{"id":544,"symbol":"PCBLP","securityName":"Prime Commercial Bank Promoter Share","name":"(PCBLP) Prime Commercial Bank Promoter Share","activeStatus":"A"},{"id":701,"symbol":"PLICPO","securityName":"Prime Life Insurance Company Limited Promoter Share","name":"(PLICPO) Prime Life Insurance Company Limited Promoter Share","activeStatus":"A"},{"id":393,"symbol":"PLIC","securityName":"Prime Life Insurance Company Limited","name":"(PLIC) Prime Life Insurance Company Limited","activeStatus":"A"},{"id":668,"symbol":"PRDBLP","securityName":"Professional Diyalo Bikas Bank Ltd. Promoter Share","name":"(PRDBLP) Professional Diyalo Bikas Bank Ltd. Promoter Share","activeStatus":"A"},{"id":338,"symbol":"PROFL","securityName":"ProgressiveFinance Limited","name":"(PROFL) ProgressiveFinance Limited","activeStatus":"A"},{"id":354,"symbol":"PROFLP","securityName":"Progressive Finance Limited Promoter Share","name":"(PROFLP) Progressive Finance Limited Promoter Share","activeStatus":"A"},{"id":604,"symbol":"PFILPO","securityName":"Prudential Finance Co. Ltd. Promoter","name":"(PFILPO) Prudential Finance Co. Ltd. Promoter","activeStatus":"A"},{"id":189,"symbol":"PICL","securityName":"Prudential Insurance Co. Ltd.","name":"(PICL) Prudential Insurance Co. Ltd.","activeStatus":"A"},{"id":648,"symbol":"PICLPO","securityName":"Prudential Insurance Co. Ltd. Promoter Share","name":"(PICLPO) Prudential Insurance Co. Ltd. Promoter Share","activeStatus":"A"},{"id":2776,"symbol":"RADHI","securityName":"Radhi Bidyut Company Ltd","name":"(RADHI) Radhi Bidyut Company Ltd","activeStatus":"A"},{"id":2783,"symbol":"RRHP","securityName":"Rairang Hydropower Development Company Ltd.","name":"(RRHP) Rairang Hydropower Development Company Ltd.","activeStatus":"A"},{"id":634,"symbol":"RBCLPO","securityName":"Rastriya Beema Company Limited Promoter Share","name":"(RBCLPO) Rastriya Beema Company Limited Promoter Share","activeStatus":"A"},{"id":177,"symbol":"RBCL","securityName":"Rastriya Beema Company Limited","name":"(RBCL) Rastriya Beema Company Limited","activeStatus":"A"},{"id":2841,"symbol":"RHPL","securityName":"RASUWAGADHI HYDROPOWER COMPANY LIMITED","name":"(RHPL) RASUWAGADHI HYDROPOWER COMPANY LIMITED","activeStatus":"A"},{"id":542,"symbol":"REDBLP","securityName":"Reliable Development Bank Ltd. Promoter Share","name":"(REDBLP) Reliable Development Bank Ltd. Promoter Share","activeStatus":"A"},{"id":587,"symbol":"RLFL","securityName":"Reliance Finance Ltd.","name":"(RLFL) Reliance Finance Ltd.","activeStatus":"A"},{"id":650,"symbol":"RLFLPO","securityName":"Reliance Finance Ltd. Promoter Share","name":"(RLFLPO) Reliance Finance Ltd. Promoter Share","activeStatus":"A"},{"id":2900,"symbol":"RLI","securityName":"Reliance Life Insurance Limited","name":"(RLI) Reliance Life Insurance Limited","activeStatus":"A"},{"id":610,"symbol":"RHPC","securityName":"Ridi Hydropower Development Company Ltd.","name":"(RHPC) Ridi Hydropower Development Company Ltd.","activeStatus":"A"},{"id":575,"symbol":"RMDC","securityName":"RMDC Laghubitta Bittiya Sanstha Ltd.","name":"(RMDC) RMDC Laghubitta Bittiya Sanstha Ltd.","activeStatus":"A"},{"id":659,"symbol":"RMDCPO","securityName":"Rural Microfinance Development Centre Ltd. Promoter Share","name":"(RMDCPO) Rural Microfinance Development Centre Ltd. Promoter Share","activeStatus":"A"},{"id":2748,"symbol":"RSDC","securityName":"RSDC Laghubitta Bittiya Sanstha Ltd.","name":"(RSDC) RSDC Laghubitta Bittiya Sanstha Ltd.","activeStatus":"A"},{"id":2749,"symbol":"RSDCP","securityName":"RSDC Laghubitta Bittiya Sanstha Ltd. Promoter Share","name":"(RSDCP) RSDC Laghubitta Bittiya Sanstha Ltd. Promoter Share","activeStatus":"A"},{"id":2843,"symbol":"SABSL","securityName":"SABAIKO LAGHUBITTA BITTIYA SANSTHA LIMITED","name":"(SABSL) SABAIKO LAGHUBITTA BITTIYA SANSTHA LIMITED","activeStatus":"A"},{"id":2896,"symbol":"SDLBSL","securityName":"Sadhana Laghubitta Bittiya Sanstha Limited","name":"(SDLBSL) Sadhana Laghubitta Bittiya Sanstha Limited","activeStatus":"A"},{"id":715,"symbol":"SAFLPO","securityName":"Sagarmatha  Finance Limited Promoter Share","name":"(SAFLPO) Sagarmatha  Finance Limited Promoter Share","activeStatus":"A"},{"id":619,"symbol":"SICPO","securityName":"Sagarmatha Insurance Co. Ltd. Promoter Share","name":"(SICPO) Sagarmatha Insurance Co. Ltd. Promoter Share","activeStatus":"A"},{"id":185,"symbol":"SIC","securityName":"Sagarmatha Insurance Co. Ltd.","name":"(SIC) Sagarmatha Insurance Co. Ltd.","activeStatus":"A"},{"id":155,"symbol":"STC","securityName":"Salt Trading Corporation","name":"(STC) Salt Trading Corporation","activeStatus":"A"},{"id":256,"symbol":"SFCL","securityName":"Samriddhi Finance Company Limited","name":"(SFCL) Samriddhi Finance Company Limited","activeStatus":"A"},{"id":298,"symbol":"SFCLP","securityName":"Samriddhi Finance Company Limited Promoter Share","name":"(SFCLP) Samriddhi Finance Company Limited Promoter Share","activeStatus":"A"},{"id":2804,"symbol":"SLBSL","securityName":"Samudayik Laghubitta Bittiya Sanstha Limited","name":"(SLBSL) Samudayik Laghubitta Bittiya Sanstha Limited","activeStatus":"A"},{"id":574,"symbol":"SKBBL","securityName":"Sana Kisan Bikas Bank Ltd","name":"(SKBBL) Sana Kisan Bikas Bank Ltd","activeStatus":"A"},{"id":171,"symbol":"SANIMA","securityName":"Sanima Bank Limited","name":"(SANIMA) Sanima Bank Limited","activeStatus":"A"},{"id":2828,"symbol":"SAND2085","securityName":"Sanima Bank Limited Debenture","name":"(SAND2085) Sanima Bank Limited Debenture","activeStatus":"A"},{"id":2773,"symbol":"SAEF","securityName":"Sanima Equity Fund","name":"(SAEF) Sanima Equity Fund","activeStatus":"A"},{"id":2922,"symbol":"SBD87","securityName":"8.5% Sanima Debenture 2087","name":"(SBD87) 8.5% Sanima Debenture 2087","activeStatus":"A"},{"id":2923,"symbol":"SLCF","securityName":"Sanima Large Cap Fund","name":"(SLCF) Sanima Large Cap Fund","activeStatus":"A"},{"id":2908,"symbol":"SGI","securityName":"Sanima General Insurance Limited","name":"(SGI) Sanima General Insurance Limited","activeStatus":"A"},{"id":591,"symbol":"SHPC","securityName":"Sanima Mai Hydropower Ltd.","name":"(SHPC) Sanima Mai Hydropower Ltd.","activeStatus":"A"},{"id":2842,"symbol":"SJCL","securityName":"SANJEN JALAVIDHYUT COMPANY LIMITED","name":"(SJCL) SANJEN JALAVIDHYUT COMPANY LIMITED","activeStatus":"A"},{"id":2860,"symbol":"SAPDBL","securityName":"Saptakoshi Development Bank Ltd","name":"(SAPDBL) Saptakoshi Development Bank Ltd","activeStatus":"A"},{"id":2861,"symbol":"SAPDBLP","securityName":"Saptakoshi Development Bank Ltd Promoter Share","name":"(SAPDBLP) Saptakoshi Development Bank Ltd Promoter Share","activeStatus":"A"},{"id":592,"symbol":"SNLB","securityName":"Sarathi Nepal Laghubitta Bittiya Sanstha Limited","name":"(SNLB) Sarathi Nepal Laghubitta Bittiya Sanstha Limited","activeStatus":"A"},{"id":643,"symbol":"SNLBP","securityName":"Sarathi Nepal Laghubitta Bittiya Sanstha Limited Promoter Share","name":"(SNLBP) Sarathi Nepal Laghubitta Bittiya Sanstha Limited Promoter Share","activeStatus":"A"},{"id":560,"symbol":"SETIPO","securityName":"Seti Finance Ltd. Promoter Share","name":"(SETIPO) Seti Finance Ltd. Promoter Share","activeStatus":"A"},{"id":597,"symbol":"SEWAPO","securityName":"Sewa Bikas Bank Ltd. Promoter","name":"(SEWAPO) Sewa Bikas Bank Ltd. Promoter","activeStatus":"A"},{"id":472,"symbol":"SADBL","securityName":"Shangrila Development Bank Ltd.","name":"(SADBL) Shangrila Development Bank Ltd.","activeStatus":"A"},{"id":708,"symbol":"SADBLP","securityName":"Shangrila Development Bank Ltd. Promoter Share","name":"(SADBLP) Shangrila Development Bank Ltd. Promoter Share","activeStatus":"A"},{"id":192,"symbol":"SICL","securityName":"Shikhar Insurance Co. Ltd.","name":"(SICL) Shikhar Insurance Co. Ltd.","activeStatus":"A"},{"id":606,"symbol":"SICLPO","securityName":"Shikhar Insurance Co. Ltd. Promoter","name":"(SICLPO) Shikhar Insurance Co. Ltd. Promoter","activeStatus":"A"},{"id":669,"symbol":"SHINEP","securityName":"Shine Resunga Development Bank Ltd. Promoter Share","name":"(SHINEP) Shine Resunga Development Bank Ltd. Promoter Share","activeStatus":"A"},{"id":473,"symbol":"SHINE","securityName":"Shine Resunga Development Bank Ltd.","name":"(SHINE) Shine Resunga Development Bank Ltd.","activeStatus":"A"},{"id":2907,"symbol":"SSHL","securityName":"Shiva Shree Hydropower Ltd","name":"(SSHL) Shiva Shree Hydropower Ltd","activeStatus":"A"},{"id":2809,"symbol":"SHIVM","securityName":"SHIVAM CEMENTS LTD","name":"(SHIVM) SHIVAM CEMENTS LTD","activeStatus":"A"},{"id":456,"symbol":"SIFCPO","securityName":"Shree Investment & Finance Co. Ltd. Promoter Share","name":"(SIFCPO) Shree Investment & Finance Co. Ltd. Promoter Share","activeStatus":"A"},{"id":244,"symbol":"SIFC","securityName":"Shree Investment Finance Co. Ltd.","name":"(SIFC) Shree Investment Finance Co. Ltd.","activeStatus":"A"},{"id":546,"symbol":"SFLPO","securityName":"Siddhartha Finance Ltd. Promoter","name":"(SFLPO) Siddhartha Finance Ltd. Promoter","activeStatus":"A"},{"id":145,"symbol":"SBL","securityName":"Siddhartha Bank Limited","name":"(SBL) Siddhartha Bank Limited","activeStatus":"A"},{"id":449,"symbol":"SBLPO","securityName":"Siddhartha Bank Limited Promoter Share","name":"(SBLPO) Siddhartha Bank Limited Promoter Share","activeStatus":"A"},{"id":2872,"symbol":"SBLD2082","securityName":"10.50% SBL Debenture 2082","name":"(SBLD2082) 10.50% SBL Debenture 2082","activeStatus":"A"},{"id":2864,"symbol":"SBLD83","securityName":"10.25% SBL Debenture 2083","name":"(SBLD83) 10.25% SBL Debenture 2083","activeStatus":"A"},{"id":2912,"symbol":"SBLD84","securityName":"8.5% SBL Debenture 2084","name":"(SBLD84) 8.5% SBL Debenture 2084","activeStatus":"A"},{"id":2770,"symbol":"SEF","securityName":"Siddhartha Equity Fund","name":"(SEF) Siddhartha Equity Fund","activeStatus":"A"},{"id":2859,"symbol":"SIGS2","securityName":"Siddhartha Investment Growth Scheme - 2","name":"(SIGS2) Siddhartha Investment Growth Scheme - 2","activeStatus":"A"},{"id":300,"symbol":"SDBLPO","securityName":"Siddhartha Development Bank Limited Promoter Share","name":"(SDBLPO) Siddhartha Development Bank Limited Promoter Share","activeStatus":"A"},{"id":280,"symbol":"SIL","securityName":"Siddhartha Insurance Ltd.","name":"(SIL) Siddhartha Insurance Ltd.","activeStatus":"A"},{"id":630,"symbol":"SILPO","securityName":"Siddhartha Insurance Ltd. Promoter Share","name":"(SILPO) Siddhartha Insurance Ltd. Promoter Share","activeStatus":"A"},{"id":561,"symbol":"SINDU","securityName":"Sindhu Bikash Bank Ltd","name":"(SINDU) Sindhu Bikash Bank Ltd","activeStatus":"A"},{"id":652,"symbol":"SINDUP","securityName":"Sindhu Bikas Bank Ltd. Promoter Share","name":"(SINDUP) Sindhu Bikas Bank Ltd. Promoter Share","activeStatus":"A"},{"id":147,"symbol":"SHL","securityName":"Soaltee Hotel Limited","name":"(SHL) Soaltee Hotel Limited","activeStatus":"A"},{"id":485,"symbol":"SODBLP","securityName":"Society  Development Bank Limited Promoter Share","name":"(SODBLP) Society  Development Bank Limited Promoter Share","activeStatus":"A"},{"id":133,"symbol":"SCB","securityName":"Standard Chartered Bank Limited","name":"(SCB) Standard Chartered Bank Limited","activeStatus":"A"},{"id":556,"symbol":"SUBBLP","securityName":"Subbecha Bikas Bank Ltd. Promoter Share","name":"(SUBBLP) Subbecha Bikas Bank Ltd. Promoter Share","activeStatus":"A"},{"id":502,"symbol":"SMFDB","securityName":"Summit Laghubitta Bittiya Sanstha Limited","name":"(SMFDB) Summit Laghubitta Bittiya Sanstha Limited","activeStatus":"A"},{"id":663,"symbol":"SMFDBP","securityName":"Summit Laghubitta Bittiya Sanstha Limited Promoter Share","name":"(SMFDBP) Summit Laghubitta Bittiya Sanstha Limited Promoter Share","activeStatus":"A"},{"id":359,"symbol":"SRBL","securityName":"Sunrise Bank Limited","name":"(SRBL) Sunrise Bank Limited","activeStatus":"A"},{"id":522,"symbol":"SRBLPO","securityName":"Sunrise Bank Ltd Promoter Share","name":"(SRBLPO) Sunrise Bank Ltd Promoter Share","activeStatus":"A"},{"id":2877,"symbol":"SFMF","securityName":"Sunrise First Mutual Fund","name":"(SFMF) Sunrise First Mutual Fund","activeStatus":"A"},{"id":2878,"symbol":"SRBLD83","securityName":"10.25% Sunrise Bank Debenture 2083","name":"(SRBLD83) 10.25% Sunrise Bank Debenture 2083","activeStatus":"A"},{"id":2834,"symbol":"SRD80","securityName":"10% Sunrise Debenture 2080","name":"(SRD80) 10% Sunrise Debenture 2080","activeStatus":"A"},{"id":2771,"symbol":"SMB","securityName":"Support Microfinance Bittiya Sanstha Ltd.","name":"(SMB) Support Microfinance Bittiya Sanstha Ltd.","activeStatus":"A"},{"id":463,"symbol":"SUPRMP","securityName":"Supreme Development Bank Ltd. Promoter Share","name":"(SUPRMP) Supreme Development Bank Ltd. Promoter Share","activeStatus":"A"},{"id":581,"symbol":"SLICLP","securityName":"Surya Life Insurance Co. Ltd. Promoter Share","name":"(SLICLP) Surya Life Insurance Co. Ltd. Promoter Share","activeStatus":"A"},{"id":403,"symbol":"SLICL","securityName":"Surya Life Insurance Company Limited","name":"(SLICL) Surya Life Insurance Company Limited","activeStatus":"A"},{"id":2750,"symbol":"SLBS","securityName":"Suryodaya Laghubitta Bittiya Sanstha Ltd.","name":"(SLBS) Suryodaya Laghubitta Bittiya Sanstha Ltd.","activeStatus":"A"},{"id":2911,"symbol":"SLBSP","securityName":"SURYODAYA LAGHUBITTA BITTIYA SANSTHA LIMITED PROMOTER SHARE","name":"(SLBSP) SURYODAYA LAGHUBITTA BITTIYA SANSTHA LIMITED PROMOTER SHARE","activeStatus":"A"},{"id":314,"symbol":"SWBBLP","securityName":"Swabalamban Laghubitta Bittiya Sanstha Limited Promoter Share","name":"(SWBBLP) Swabalamban Laghubitta Bittiya Sanstha Limited Promoter Share","activeStatus":"A"},{"id":268,"symbol":"SWBBL","securityName":"Swabalamban Laghubitta Bittiya Sanstha Limited","name":"(SWBBL) Swabalamban Laghubitta Bittiya Sanstha Limited","activeStatus":"A"},{"id":2829,"symbol":"SMFBS","securityName":"Swabhimaan Laghubitta Bittiya Sanstha Limited","name":"(SMFBS) Swabhimaan Laghubitta Bittiya Sanstha Limited","activeStatus":"A"},{"id":545,"symbol":"SLBBL","securityName":"Swarojgar Laghu Bitta Bikas Bank Ltd.","name":"(SLBBL) Swarojgar Laghu Bitta Bikas Bank Ltd.","activeStatus":"A"},{"id":721,"symbol":"SLBBLP","securityName":"Swarojgar Laghu Bitta Bikas Bank Ltd. Promoter Share","name":"(SLBBLP) Swarojgar Laghu Bitta Bikas Bank Ltd. Promoter Share","activeStatus":"A"},{"id":2759,"symbol":"SPDL","securityName":"Synergy Power Development Ltd.","name":"(SPDL) Synergy Power Development Ltd.","activeStatus":"A"},{"id":148,"symbol":"TRH","securityName":"Taragaon Regency Hotel Limited","name":"(TRH) Taragaon Regency Hotel Limited","activeStatus":"A"},{"id":688,"symbol":"TDBLPO","securityName":"Tourism Development Bank Ltd. Prmoter Share","name":"(TDBLPO) Tourism Development Bank Ltd. Prmoter Share","activeStatus":"A"},{"id":465,"symbol":"TBBLP","securityName":"Triveni Bikas Bank Ltd Promoter Share","name":"(TBBLP) Triveni Bikas Bank Ltd Promoter Share","activeStatus":"A"},{"id":219,"symbol":"UNL","securityName":"Unilever Nepal Limited","name":"(UNL) Unilever Nepal Limited","activeStatus":"A"},{"id":476,"symbol":"UFCLPO","securityName":"Union Finance Co. Ltd. Promoter Share","name":"(UFCLPO) Union Finance Co. Ltd. Promoter Share","activeStatus":"A"},{"id":2831,"symbol":"UNHPL","securityName":"Union Hydropower Limited","name":"(UNHPL) Union Hydropower Limited","activeStatus":"A"},{"id":603,"symbol":"UFILPO","securityName":"Unique Finance Ltd. Promoter Share","name":"(UFILPO) Unique Finance Ltd. Promoter Share","activeStatus":"A"},{"id":242,"symbol":"UFL","securityName":"United Finance Ltd.","name":"(UFL) United Finance Ltd.","activeStatus":"A"},{"id":350,"symbol":"UFLPO","securityName":"United Finance Company Limited Promoter Share","name":"(UFLPO) United Finance Company Limited Promoter Share","activeStatus":"A"},{"id":2914,"symbol":"UMRH","securityName":"United IDI Mardi RB Hydropower Limited.","name":"(UMRH) United IDI Mardi RB Hydropower Limited.","activeStatus":"A"},{"id":180,"symbol":"UIC","securityName":"United Insurance Co. (Nepal) Ltd.","name":"(UIC) United Insurance Co. (Nepal) Ltd.","activeStatus":"A"},{"id":726,"symbol":"UICPO","securityName":"United Insurance Co. (Nepal) Ltd. Promoter Share","name":"(UICPO) United Insurance Co. (Nepal) Ltd. Promoter Share","activeStatus":"A"},{"id":2760,"symbol":"UMHL","securityName":"United Modi Hydropower Ltd.","name":"(UMHL) United Modi Hydropower Ltd.","activeStatus":"A"},{"id":2810,"symbol":"UPCL","securityName":"UNIVERSAL POWER COMPANY LTD","name":"(UPCL) UNIVERSAL POWER COMPANY LTD","activeStatus":"A"},{"id":2774,"symbol":"USLB","securityName":"Unnati Sahakarya Laghubitta Bittiya Sanstha Limited","name":"(USLB) Unnati Sahakarya Laghubitta Bittiya Sanstha Limited","activeStatus":"A"},{"id":2792,"symbol":"UPPER","securityName":"Upper Tamakoshi Hydropower Ltd","name":"(UPPER) Upper Tamakoshi Hydropower Ltd","activeStatus":"A"},{"id":687,"symbol":"VLBS","securityName":"Vijaya laghubitta Bittiya Sanstha Ltd.","name":"(VLBS) Vijaya laghubitta Bittiya Sanstha Ltd.","activeStatus":"A"},{"id":716,"symbol":"VLBSPO","securityName":"Vijaya laghubitta Bittiya Sanstha Ltd. Promoter Share","name":"(VLBSPO) Vijaya laghubitta Bittiya Sanstha Ltd. Promoter Share","activeStatus":"A"},{"id":706,"symbol":"WOMI","securityName":"Womi Microfinance Bittiya Sanstha Ltd.","name":"(WOMI) Womi Microfinance Bittiya Sanstha Ltd.","activeStatus":"A"},{"id":720,"symbol":"WOMIPO","securityName":"Womi Microfinance Bittiya Sanstha Ltd. Promoter Share","name":"(WOMIPO) Womi Microfinance Bittiya Sanstha Ltd. Promoter Share","activeStatus":"A"}]
    for d in data:
        if d['symbol'].lower() == symbol.lower():
            return d
    return {"id":2790,"symbol":"ACLBSL","securityName":"Aarambha Chautari Laghubitta Bittiya Sanstha Limited","name":"(ACLBSL) Aarambha Chautari Laghubitta Bittiya Sanstha Limited","activeStatus":"A"}
    
def needsUpdate(data):
    """CHECK IF DATA WAS FETCHED BEFORE AN HOUR AGO
    
    """

    for d in data:
        if 'UpdatedAT' in d:
            time=d['UpdatedAT']
            
    difference = datetime.now() - time
    duration_in_s = difference.total_seconds()
    hours = int(divmod(duration_in_s, 3600)[0])
    return hours

class Fetch:
    """
    Basic Class To Fetch DATA OFF SHARESANSAR
    
    """

    def __init__(self):
        self.url='https://www.sharesansar.com/company/'
        pass

    @FetchIfNotSaved
    def getInfo(self,code):
        r=requests.get(self.url+code)
        soup=BeautifulSoup(r.content,'html.parser')
        price = soup.find('span',{'class':re.compile('comp-price')}).text.strip()
        comp_ratio = soup.find('span',{'class':re.compile('comp-ratio')}).text.strip()
        comp_percent = soup.find('span',{'class':re.compile('comp-percent')}).text.strip().replace(' ','').replace('\n','')
        open_info_divs = soup.find_all('div',{'class':'second-row margin-bottom-15'})
        open = open_info_divs[0].find_all('span')[0].text.split('\n')[1].strip()
        high = open_info_divs[0].find_all('span')[2].text.split('\n')[1].strip()
        low = open_info_divs[0].find_all('span')[4].text.split('\n')[1].strip()
        volume = open_info_divs[0].find_all('span')[6].text.split('\n')[1].strip()
        weeks52 = open_info_divs[1].find_all('span')[0].text.split('\n')[1].strip()
        average182 = open_info_divs[1].find_all('span')[2].text.split('\n')[1].strip()
        average120 = open_info_divs[1].find_all('span')[3].findNext('span').text.split('\n')[1].strip()
        dict={'Market Value':price,'Day Change':comp_ratio,'Change Percent':comp_percent,'Open':open,
        'High':high,'Low':low,'Volume':volume,'52 Week High-Low':weeks52,'180 Days Average':average182,'120 Days Average':average120
        }
        FullData = [dict,{'Dividend':self.DiviDend(soup)},
        {'Right Share':self.RightShare(soup)},
        {'Auction':self.Auction(soup)},
        {'Pivot':self.Pivot(soup)},
        {'Moving Analysis':self.MovingAnalysis(soup)},
        {'Company Info':self.CompanyInfo(soup)},
        {'UpdatedAT':(datetime.now())}
        ]
        mycache = FileCache('nepse')
        mycache[code] = FullData
        mycache.close()
        return FullData

    def live(self,code):

        """
        LIVE NEPSE PRICES.
        THIS IS NOT CACHED SINCE WE GOTTA NEED REALTIME DATA
        
        """
        id= getCompanies(code)['id']
        url=f'https://newweb.nepalstock.com.np/api/nots/security/{id}'
        headers = {
            'authority': 'newweb.nepalstock.com.np',
            'cache-control': 'max-age=0',
            'sec-ch-ua': '^\\^Google',
            'sec-ch-ua-mobile': '?0',
            'upgrade-insecure-requests': '1',
            'user-agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/89.0.4389.114 Safari/537.36',
            'accept': 'text/html,application/xhtml+xml,application/xml;q=0.9,image/avif,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3;q=0.9',
            'sec-fetch-site': 'none',
            'sec-fetch-mode': 'navigate',
            'sec-fetch-user': '?1',
            'sec-fetch-dest': 'document',
            'accept-language': 'en-US,en;q=0.9',
        }

        r=requests.get(url,headers=headers)
        #print(r.content,url)
        return r.json()

    def DiviDend(self,soup):
        table = soup.find('table',{'class':'table table-bordered table-striped table-hover text-center company-table'})
        name = table.find_all('td',{'class':'comp-tbl-text'})
        name = [table.text.strip() for table in name]
        data = [data.text.strip().replace('\n','').replace(' ','') for data in table.find_all('td') if not data.has_attr('class')]
        di= dict(zip(name,data))
        return di

    def RightShare(self,soup):
        table = soup.find_all('table',{'class':'table table-bordered table-striped table-hover text-center company-table'})[1]
        name = table.find_all('td',{'class':'text-center'})
        name = [table.text.strip().replace('/\n','').replace(' ','').replace('\n',' ') for table in name]
        plain_list_iter = iter(name)

        # converting the plain_list to dict
        plain_list_dict_object = itertools.zip_longest(plain_list_iter, plain_list_iter, fillvalue=None)

        # convert the zip_longest object to dict using `dict`
        plain_list_dict = dict(plain_list_dict_object)
        return plain_list_dict

    def Auction(self,soup):
        table = soup.find_all('table',{'class':'table table-bordered table-striped table-hover text-center company-table'})[2]
        name = table.find_all('td',{'class':'text-center'})
        name = [table.text.strip().replace('/\n','').replace(' ','').replace('\n',' ') for table in name]
        plain_list_iter = iter(name)

        # converting the plain_list to dict
        plain_list_dict_object = itertools.zip_longest(plain_list_iter, plain_list_iter, fillvalue=None)

        # convert the zip_longest object to dict using `dict`
        plain_list_dict = dict(plain_list_dict_object)
        return plain_list_dict
        
    def Pivot(self,soup):
        table = soup.find_all('table',{'class':'table table-bordered table-striped table-hover text-center company-table'})[3]
        name = table.find_all('td',{'class':'comp-tbl-text'})
        name = [table.text.strip() for table in name]
        data = [data.text.strip().replace('\n','').replace(' ','') for data in table.find_all('td') if not data.has_attr('class')]
        di= dict(zip(name,data))
        return di

    def MovingAnalysis(self,soup):
        table = soup.find_all('table',{'class':'table table-bordered table-striped table-hover text-center company-table'})[4]
        name = table.find_all('td',{'class':'comp-tbl-text'})
        name = [table.text.strip() for table in name]
        data = [data.text.strip().replace('\n','').replace(' ','') for data in table.find_all('td') if not data.has_attr('class')]
        di= dict(zip(name,data))
        return di


    def CompanyInfo(self,soup):
        table = soup.find_all('table',{'class':'table table-hover table-striped table-bordered compact'})[0]
        name = table.find_all('td',{'class':'text-bold'})
        name = [' '.join(table.text.strip().replace('/\n','').replace('\n',' ').split()) for table in name]
        plain_list_iter = iter(name)

        # converting the plain_list to dict
        plain_list_dict_object = itertools.zip_longest(plain_list_iter, plain_list_iter, fillvalue=None)

        # convert the zip_longest object to dict using `dict`
        plain_list_dict = dict(plain_list_dict_object)
        return plain_list_dict
    

    def getCODE(self,code):
        """
        GET COMPANY's SHARE ID FROM SCRIP
        
        """ 
        response = requests.get('https://iporesult.cdsc.com.np/result/companyShares/fileUploaded').json()['body']
        for resp in response:
            if resp['scrip'].lower()==code.lower():
                return resp['id']
               
    def checkIPO(self,boid,code):
        codex = self.getCODE(code)
        data = {"companyShareId":codex,"boid":boid}

        response = requests.post('https://iporesult.cdsc.com.np/result/result/check', json=data).json()
        return response



class Graph:

    """Visualizing The History DATA
    
    History Data Are Fetched From nepsealpha.com
    
    """

    def __init__(self):
        pass
    def getGraphData(self,symbol):
        timestamp= int(time.time())
        headers = {"User-Agent": "Mozilla/5.0 (Windows NT 10.0; Win64; x64; rv:87.0) Gecko/20100101 Firefox/87.0", "Accept": "*/*", "Accept-Language": "en-US,en;q=0.5", "Accept-Encoding": "gzip, deflate", "Referer": "https://nepsealpha.com/trading/chart", "Connection": "close"}
        cookies = {"__cfduid": "dd66a3c817fee77502422e75a18781c501618580758", "laravel_session": "eyJpdiI6IitPVFNYTVhwc0t1S0lMQkIxTkpuaVE9PSIsInZhbHVlIjoiM3VwcklrNnRcL3dHamZ2ajdLbFhJejV3Y3VUM3UxcStEU0prWGxhWlZwYTJ5a2s5SXlOcEZNUlwvWUVXc25MbGxkIiwibWFjIjoiYWEzMjFmNTQ4MzFkZGFhYjk5MGQ4NGNhNzg5MWQ3MTI4ODg2ODEyZTcwYmY3NmY1NjgwMDU1NzQxYWNhMDE0NCJ9", "_ga_LBBQFT2KX1": "GS1.1.1618580780.1.0.1618580782.0", "_ga": "GA1.1.1585771795.1618580780"}
        
        r=requests.get(f'https://nepsealpha.com/trading/1/history?symbol={symbol}&resolution=1D&from=1584452589&to={timestamp}&currencyCode=NRS',headers=headers,cookies=cookies)
        return r.json()

    def basicGraph(self,symbol):
        symbol = symbol.upper()
        plt.style.use(['dark_background'])
        data=self.getGraphData(symbol)
        times = data['t']
        open_price = data['o']
        high= data['h']
        low = data['l']
        close_price= data['c']
        volume = data['v']
        x = [datetime.datetime.utcfromtimestamp(time).strftime('%Y-%m-%d ') for time in times]
        dates= ['' for date in times]
        y = open_price
        plt.plot(x,y,label='Open Price')
        plt.plot(close_price,label="Close Price")
        plt.plot(high,label="High")
        plt.plot(low,label="Low")   
        plt.legend(loc="upper left")

        plt.title(f'{symbol} Prices As of {x[-1]}')

        plt.xlabel(f"Start Date : {x[0]} | END DATE : {x[-1]}\n\nOPEN PRICE : {open_price[-1]}  | ClOSE PRICE : {close_price[-1]} | High : {high[-1]} | Low : {low[-1]}")
        ax=plt.gcf().autofmt_xdate()
        ax = plt.gca()
        ax.axes.xaxis.set_ticks([])
        plt.savefig('display.png')
        plt.clf()
